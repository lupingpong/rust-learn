## 结构体（struct）

在面向对象（oo）的编程语言中，对象一般具有数据属性（data）和行为表现（behavior）。

数据属性： 用于描述数据（有的也叫成员变量），是多种数据类型的命名集合。

行为表现： 方法或者函数。

Rust中二者是分离的，其中结构体struct用于描述属性集合。

形式：struct StructName { attr_name:dataType,}

使用关键字struct修饰，紧跟着的是结构体名称，采用驼峰命名法且首字母大写，花括号里面类似于键值对集合，属性名称:数据类型。

>struct User {
>
>    name:String,
>
>    age:i32,
>
>    phone:String,
>
>}

单从花括号中的结构看，跟元组（tuple）差不多，但元组是没有属性名称的，或者说跟JSON也有点类似，毕竟都是键值对。

最后一个逗号可有可无。

>let user = User {
>
>    name：String::from("rust"),
>
>    age:5,
>
>    phone:String::from("123456789"),
>
>}

默认同样也是不可变的，需要可变性使用mut修饰即可，使用mut修饰之后可以在外面进行重新赋值，格式：结构体变量名称.属性名称 = xxxxx;

"." 点操作符同样适用于获取结构体的属性值。

>let name = String::from("rust");
>
>let user = User {
>
>    name,
>
>    age:5,
>
>    phone:String::from("123456789"),
>
>}

如果当前作用域内或者函数参数与结构体内的属性相等（名称相同且数据类型一致），则可以省略显示赋值。

    注意：因为Rust存在变量覆盖的特性，同一个变量名称在同一个作用域内可以有多次覆盖。

>let user1 = User {
>
>    name:String::from("c++"),
>
>    ..user1
>
>}

如果需要复制同一个结构体变量的数据，使用符号“..”可以进行，对于所有权相关规则也同样适应，此处user.phone是String类型，发生Move转移给了user1。

## 特殊结构体

1. 元组结构体

    格式：struct StructName(dataType,xx,xx);


    元组结构体聚合了结构体和元组的特性，“（）”外符号结构体的形式，里面则符号元组的形式。

2. unit-like结构体
   
   格式：struct StructName;

   单元式的结构体是没有任何属性的。

## 结构体与Ownership

定义结构体的时候字符串使用的是String，而没有使用&str切片字符串，因为struct要求结构体变量的生命周期要比结构体中属性变量的生命周期长。

## 方法（结构体的行为表现）

>impl User{
>
>>    fn show(&self){
>>    
>>        println!("{} age is {}",self.name,self.age);
>>
>>    }
>
>}

定义方法跟定义函数基本一样，都是使用fn关键字，名称，参数，返回值，不同的是，方法是数据行为的表现，它的是依附于数据属性（或者说对象）的，比如：结构体、枚举等。

除此之外，方法的第一个参数总是self(&self)，它表示调用该方法的对象。

impl关键字在这里的语义是：将{}中的所有行为关联到对象上,可以多次使用impl修饰同一个对象，但是一般没有必要这样做。

> user.show();

其他细节：

    1. 方法和函数不是等价的，方法依附于对象。

    2. impl有多重语义，但核心都是对行为的附加或者说绑定。

    3. self或者&self，依照ownership规则进行选择使用，无其他特殊规则。

    4. Rust的自动解引用在方法参数上依旧适用。

    5. impl 结构体实际上更类似于对象私有行为，与其他语言的接口不一样。
    

